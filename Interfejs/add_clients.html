<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mKelner - Dodaj Klienta</title>
  <link rel="stylesheet" href="css.css">
</head>
<body>
  <aside>
    <h2>mKelner</h2>
    <nav>
      <a href="menu.html">Menu</a>
      <a href="order.html">Zamówienia</a>
      <a href="clients.html" class="active">Klienci</a>
      <a href="stats.html">Statystyka</a>
      <a href="history.html">Historia Zamówień</a>
      <a href="login.html" class="logout">Wyloguj się</a>
    </nav>
    <div class="tables" id="sideTables"></div>
  </aside>

  <main class="main">
    <div class="client-form-container">
      <h2>Dodaj nowego klienta</h2>
      <form id="addClientForm">
        <div class="form-group">
          <label for="tableNumber">Nr stolika</label>
          <input type="number" id="tableNumber" required>
        </div>
        <div class="form-group">
          <label for="photo">Zdjęcie (URL)</label>
          <input type="url" id="photo" required placeholder="https://example.com/photo.jpg">
        </div>
        <div class="form-group">
          <label for="name">Imię i nazwisko</label>
          <input type="text" id="name" required>
        </div>
        <div class="form-group">
          <label for="gender">Płeć</label>
          <select id="gender" required>
            <option value="Kobieta">Kobieta</option>
            <option value="Mężczyzna">Mężczyzna</option>
          </select>
        </div>
        <div class="form-group">
          <label for="age">Wiek</label>
          <input type="number" id="age" required>
        </div>
        <div class="form-group">
          <label for="allergens">Alergeny</label>
          <input type="text" id="allergens" placeholder="np. Gluten, laktoza">
        </div>
        <div class="form-group">
          <label for="status">Status</label>
          <select id="status" required>
            <option value="active">Aktywny</option>
            <option value="finished">Zakończony</option>
          </select>
        </div>
        <button type="submit" class="btn">Dodaj klienta</button>
      </form>
    </div>
  </main>

  <script>
    document.getElementById('addClientForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const newClient = {
        id: Date.now(), // Simple unique ID based on timestamp
        tableNumber: document.getElementById('tableNumber').value,
        photo: document.getElementById('photo').value,
        name: document.getElementById('name').value,
        gender: document.getElementById('gender').value,
        age: document.getElementById('age').value,
        allergens: document.getElementById('allergens').value || 'Brak',
        status: document.getElementById('status').value
      };

      // Save to localStorage
      const storedClients = localStorage.getItem('clients');
      const clients = storedClients ? JSON.parse(storedClients) : [];
      clients.push(newClient);
      localStorage.setItem('clients', JSON.stringify(clients));

      // Redirect back to clients.html
      alert('Klient został dodany!');
      window.location.href = 'clients.html';
    });
  </script>
</body>
</html>